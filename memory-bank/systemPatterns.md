# システムパターン - AREMA

## システムアーキテクチャ

AREMAアプリケーションはクライアント・サーバーアーキテクチャに従っています：

- クライアント：エンドユーザー向けのウェブアプリケーション（AREMA配信サービス）
- サーバー：APIサービスとデータを提供するバックエンド

## アプリケーションコンポーネント

- フロントエンド：ブラウザで実行されるウェブクライアント
- バックエンドAPI：フロントエンドにデータとサービスを提供
- データベース：アプリケーションデータ（動画、ユーザーなど）を保存

## 設計パターン

### コード編成

- モジュラーなコード編成のためのpnpmワークスペース：
  - `/workspaces/server`：サーバー実装
  - `/workspaces/client`：ウェブクライアント実装
  - `/workspaces/schema`：共有データモデルとインターフェース
  - `/workspaces/configs`：設定ファイル
  - `/workspaces/test`：テストインフラストラクチャ

### APIアーキテクチャ

- Swaggerドキュメントを備えたREST API
- 異なるアプリケーション機能のためのAPIエンドポイント
- `POST /api/initialize`によるデータベースリセット機能

### テストアプローチ

- PlaywrightによるVRT（ビジュアルリグレッションテスト）
- 機能検証のための手動テストケース
- スコアリングのためのLighthouseパフォーマンステスト

## パフォーマンス考慮事項

アプリケーションには意図的なパフォーマンス問題があり、最適化が必要です：

- ページ読み込みパフォーマンス
- ユーザーインタラクションの応答性
- 動画再生の効率性

各領域は別々にスコアリングされます：

- ページ表示：最大900点（9ページ × 各100点）
- ページ操作：最大200点（4シナリオ × 各50点）
- 動画再生：最大100点（2シナリオ × 各50点）

## 技術的決定事項

- クライアントとサーバーの両方にNode.jsを使用
- 最新のウェブ技術の活用
- 動画ストリーミング実装
- コンテンツとユーザーのデータ管理

## 最適化の制約

- 視覚的な外観を維持する必要がある（VRTで検証）
- 機能性を維持する必要がある（手動テストで検証）
- Lighthouseメトリクスとカスタム動画再生メトリクスに基づいてスコアリング
